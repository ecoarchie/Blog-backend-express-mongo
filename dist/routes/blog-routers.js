"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.blogRouter = void 0;
const express_1 = require("express");
const input_validation_middleware_1 = require("../middlewares/input-validation-middleware");
const basic_auth_middleware_1 = require("../middlewares/basic-auth-middleware");
const jwt_auth_mware_1 = require("../middlewares/jwt-auth-mware");
const composition_root_1 = require("../composition-root");
exports.blogRouter = (0, express_1.Router)();
// const blogsController = new BlogsController();
exports.blogRouter.get('/', composition_root_1.blogsController.getAllBlogs);
exports.blogRouter.post('/', basic_auth_middleware_1.basicAuthMiddleware, (0, input_validation_middleware_1.blogBodyValidation)(), input_validation_middleware_1.inputValidatiomMiddleware, composition_root_1.blogsController.createBlog);
exports.blogRouter.post('/:blogId/posts', basic_auth_middleware_1.basicAuthMiddleware, (0, input_validation_middleware_1.postBodyValidation)(), input_validation_middleware_1.inputValidatiomMiddleware, composition_root_1.blogsController.createBlogPost);
exports.blogRouter.get('/:id', composition_root_1.blogsController.getBlogById);
exports.blogRouter.put('/:id', basic_auth_middleware_1.basicAuthMiddleware, (0, input_validation_middleware_1.blogBodyValidation)(), input_validation_middleware_1.inputValidatiomMiddleware, composition_root_1.blogsController.updateBlogById);
exports.blogRouter.delete('/:id', basic_auth_middleware_1.basicAuthMiddleware, composition_root_1.blogsController.deleteBlogById);
exports.blogRouter.get('/:blogId/posts', jwt_auth_mware_1.accessTokenValidation, composition_root_1.blogsController.getPostsByBlogId);
