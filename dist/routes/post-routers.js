"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.postRouter = void 0;
const express_1 = require("express");
const composition_root_1 = require("../composition-root");
const post_controllers_1 = require("../controllers/post-controllers");
const basic_auth_middleware_1 = require("../middlewares/basic-auth-middleware");
const blog_id_custom_validator_1 = require("../middlewares/blog-id-custom-validator");
const input_validation_middleware_1 = require("../middlewares/input-validation-middleware");
const jwt_auth_mware_1 = require("../middlewares/jwt-auth-mware");
const postsController = composition_root_1.container.resolve(post_controllers_1.PostsController);
exports.postRouter = (0, express_1.Router)();
exports.postRouter.get('/', jwt_auth_mware_1.accessTokenValidation, postsController.getAllPostsController);
exports.postRouter.post('/', basic_auth_middleware_1.basicAuthMiddleware, blog_id_custom_validator_1.isValidBlogId, (0, input_validation_middleware_1.postBodyValidation)(), input_validation_middleware_1.inputValidatiomMiddleware, postsController.createPostController);
exports.postRouter.get('/:id', jwt_auth_mware_1.accessTokenValidation, postsController.getPostByIdController);
exports.postRouter.put('/:id', basic_auth_middleware_1.basicAuthMiddleware, blog_id_custom_validator_1.isValidBlogId, (0, input_validation_middleware_1.postBodyValidation)(), input_validation_middleware_1.inputValidatiomMiddleware, postsController.updatePostByIdController);
exports.postRouter.delete('/:id', basic_auth_middleware_1.basicAuthMiddleware, postsController.deletePostByIdController);
exports.postRouter.get('/:postId/comments', jwt_auth_mware_1.accessTokenValidation, postsController.getCommentsForPostController);
exports.postRouter.post('/:postId/comments', jwt_auth_mware_1.jwtAuthMware, (0, input_validation_middleware_1.commentBodyValidation)(), input_validation_middleware_1.inputValidatiomMiddleware, postsController.createCommentForPostController);
exports.postRouter.put('/:postId/like-status', jwt_auth_mware_1.jwtAuthMware, (0, input_validation_middleware_1.LikeBodyValidation)(), input_validation_middleware_1.inputValidatiomMiddleware, postsController.likePostController);
